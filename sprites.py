# sprites.py
# Pet mood sprites: 5 moods Ã— 2 frames each (64x64 ASCII art, centered)

from micropython import const

def ascii_to_bitmap(frames_ascii, width, height):
    """Convert ASCII art frames to 1-bit bitmaps (row-major, MSB-first)"""
    bitmaps = []
    row_bytes = (width + 7) // 8
    for frame in frames_ascii:
        lines = [ln for ln in frame.split('\n') if ln != '']
        if len(lines) != height:
            raise ValueError("Frame height mismatch: expected %d, got %d" % (height, len(lines)))
        buf = bytearray(row_bytes * height)
        for y in range(height):
            row = lines[y]
            if len(row) < width:
                row = row + '.' * (width - len(row))
            for x in range(width):
                bit = 1 if row[x] != '.' else 0
                byte_index = y * row_bytes + (x // 8)
                bit_pos = 7 - (x % 8)
                if bit:
                    buf[byte_index] |= (1 << bit_pos)
        bitmaps.append(bytes(buf))
    return bitmaps


# Pet dimensions (64x64 for max size on 128x64 screen)
PET_W = const(64)
PET_H = const(64)

# Mood enum
MOOD_HAPPY = const(0)
MOOD_SAD = const(1)
MOOD_BORED = const(2)
MOOD_LOVE = const(3)
MOOD_POUTING = const(4)

# Happy mood (2 frames: eyes open, eyes blink)
HAPPY_FRAMES_ASCII = [
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########....########....###########..................
...........########....########....###########..................
...........########....########....###########..................
...........########....########....###########..................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########........................######...............
...........########........................######...............
...........########........................######...............
...........########........................######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........######################################...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
#..................................................#.....#....#.""",
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########################################.............
...........########################################.............
...........########################################.............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########........................######...............
...........########........................######...............
...........########........................######...............
...........########........................######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........######################################...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
]

# Sad mood (2 frames: droopy eyes, tear)
SAD_FRAMES_ASCII = [
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########....................########..............
...........########....................########..............
...........########....................########..............
...........########....##########......########..............
...........########....##########......########..............
...........########....##########......########..............
...........########....................########..............
...........######################################...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........########............................###............
...........########............................###............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########....................########..............
...........########....................########..............
...........########....................########..............
...........########....##########......########..............
...........########....##########......########..............
...........########....##########......########..............
...........########....................########..............
...........######################################...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
]

# Bored mood (2 frames: half-closed eyes, yawn)
BORED_FRAMES_ASCII = [
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########################################.............
...........########....########....########......###............
...........########....########....########......###............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########......................########...............
...........########......................########...............
...........########......................########...............
...........########......................########...............
...........########......................########...............
...........######################################...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########################################.............
...........########....########....########......###............
...........########....########....########......###............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########......................########...............
...........########......................########...............
...........########......................########...............
...........########....##################........###............
...........########....##################........###............
...........########....##################........###............
...........########......................########...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
]

# Love mood (2 frames: heart eyes, sparkle)
LOVE_FRAMES_ASCII = [
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########..####......####..####........###............
...........########..####......####..####........###............
...........######....####......####..####......#####............
...........######....####......####..####......#####............
...........######....####......####..####......#####............
...........########..####......####..####........###............
...........########..####......####..####........###............
...........##########..............##########...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########........................######...............
...........########........................######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########..####......####..####........###............
...........########..####......####..####........###............
...........######....####......####..####......#####............
...........######....####......####..####......#####............
...........######....####......####..####......#####............
...........########..####......####..####........###............
...........########..####......####..####........###............
...........##########..............##########...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########........................######...............
...........########........................######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........########..##################....######...............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
]

# Pouting mood (2 frames: angry eyebrows, puff cheeks)
POUTING_FRAMES_ASCII = [
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########################################.............
...........############....########....##############...........
...........##########......########......############...........
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########....................########..............
...........########....................########..............
...........########....................########..............
...........########..##################........###............
...........########..##################........###............
...........########....................########..............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
    """................................................................
................................................................
....................####################........................
..................########################......................
................############################....................
...............##############################...................
..............################################..................
..............################################..................
.............##################################.................
.............##################################.................
............####################################................
............####################################................
............####################################................
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########################################.............
...........############....########....##############...........
...........##########......########......############...........
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........########....########....########......###............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........######################################...............
...........########....................########..............
...........########....................########..............
...........########..##################........###............
...........########..##################........###............
...........########..##################........###............
...........########....................########..............
...........######################################...............
............####################################................
............####################################................
............####################################................
.............##################################.................
.............##################################.................
..............################################..................
..............################################..................
...............##############################...................
................############################....................
..................########################......................
....................####################........................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................
................................................................""",
]

# Convert all to bitmaps
HAPPY_FRAMES = ascii_to_bitmap(HAPPY_FRAMES_ASCII, PET_W, PET_H)
SAD_FRAMES = ascii_to_bitmap(SAD_FRAMES_ASCII, PET_W, PET_H)
BORED_FRAMES = ascii_to_bitmap(BORED_FRAMES_ASCII, PET_W, PET_H)
LOVE_FRAMES = ascii_to_bitmap(LOVE_FRAMES_ASCII, PET_W, PET_H)
POUTING_FRAMES = ascii_to_bitmap(POUTING_FRAMES_ASCII, PET_W, PET_H)

# Mood frame lookup
MOOD_FRAMES = {
    MOOD_HAPPY: HAPPY_FRAMES,
    MOOD_SAD: SAD_FRAMES,
    MOOD_BORED: BORED_FRAMES,
    MOOD_LOVE: LOVE_FRAMES,
    MOOD_POUTING: POUTING_FRAMES,
}
